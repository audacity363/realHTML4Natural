#CC=gcc
CC=xlc

CFLAGS=-O3 -Wunused-result

HEADERS = httpint.h httpapi.h httpxml.h

TARGET = miniweb
HTTPOBJ += ./bin/miniweb.o

DEFINES=

OS="Linux"

DEFINES+= -DHTTP_DEBUG
LDFLAGS += -g


#HOMEDIR = /home/tom//Documents/realHtml4Natural/
HOMEDIR = /u/it/a140734/C/realHtml4Natural/

STANDARD_PATH    	=   $(HOMEDIR)/include
CFG_PATH     		= 	$(HOMEDIR)/libs/CfgReader/

INCDIR = -I$(STANDARD_PATH) \
		 -I$(CFG_PATH)


LIBS = -L$(CFG_PATH) -lcfg

%.o: ../%.c $(HEADERS)
	$(CC) $(DEFINES) -g -c -o $@ $(CFLAGS) $(INCDIR) $(filter %.c, $^) 

all: 
	@echo Building for $(OS)
	$(CC) $(DEFINES) -g -c -o ./bin/httppil.o httppil.c $(INCDIR)
	$(CC) $(DEFINES) -g -c -o ./bin/http.o http.c $(INCDIR)
	$(CC) $(DEFINES) -g -c -o ./bin/httpxml.o httpxml.c $(INCDIR)
	$(CC) $(DEFINES) -g -c -o ./bin/httphandler.o httphandler.c $(INCDIR)
	$(CC) $(DEFINES) -g -c -o ./bin/httppost.o httppost.c $(INCDIR)
	$(CC) $(DEFINES) -g -c -o ./bin/httpauth.o httpauth.c $(INCDIR)
	$(CC) $(DEFINES) -g -c -o ./bin/lookup.o lookup.c $(INCDIR)
	$(CC) $(DEFINES) -g -c -o ./bin/natural.o natural.c $(INCDIR)
	$(CC) $(DEFINES) -g -o ./bin/miniweb.o miniweb.c $(INCDIR)
	$(CC) -g -o ./miniweb ./bin/*.o

clean:
	@rm -f ./bin/*.o
	@rm -rf Debug Release
