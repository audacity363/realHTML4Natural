OBJ = start.o printLDA.o free.o

INCLUDE = -I../varhandle_lib/src/

LIBS = -L../varhandle_lib/ -lvars

CFLAGS = -c -g

lib: $(OBJ)
	ar -vcru libldaparser.a ./bin/*.o

lib_debug:
	make -f Makefile_AIX clean
	xlc $(CFLAGS) -g -DLOGDEBUG ./src/start.c $(INCLUDE) -o ./bin/start.o
	xlc $(CFLAGS) -g -DLOGDEBUG ./src/printLDA.c $(INCLUDE) -o ./bin/printLDA.o
	xlc $(CFLAGS) -g -DLOGDEBUG ./src/free.c $(INCLUDE) -o ./bin/free.o
	ar -vcru libldaparser.a ./bin/*.o

	
$(OBJ):
	xlc $(CFLAGS) ./src/$*.c $(INCLUDE) -o ./bin/$*.o

clean:
	rm -rf libldaparser.a
	rm -rf ./bin/*.o

test:
	xlc -g ./test_src/main.c $(INCLUDE) -o ./test_src/test -L./ -lldaparser -I./src/ $(LIBS)
	./test_src/test ./test_files/TEST.NGL
