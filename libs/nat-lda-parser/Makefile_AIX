OBJ = unix.o start.o

INCLUDE = -I../varhandle_lib/src/

LIBS = -L../varhandle_lib/ -lvars

lib: $(OBJ)
	ar -vcru libldaparser.a ./bin/*.o
	
$(OBJ):
	xlc -g -c ./src/$*.c $(INCLUDE) -o ./bin/$*.o

clean:
	rm -rf libldaparser.a
	rm -rf ./bin/*.o

test:
	make lib
	gcc -g ./test_src/main.c $(INCLUDE) -o ./test -L./ -lldaparser -I./src/ $(LIBS)
