OBJ = rh4n_utils.o

INCLUDE = -I./include/ \
		  -I../../include/ \
		  -I../varhandle_lib/src \
		  -I../rh4n_logging/include/
 
LIBS = 

CC = xlc

lib: clean $(OBJ)
	@printf "Linking Utils library\n"
	@ar -cru librh4nutils.a ./bin/*.o
	
$(OBJ):
	@printf "CC ./src/$*.c => ./bin/$*.o\n"
	@$(CC) -g -c ./src/$*.c $(INCLUDE) -o ./bin/$*.o

clean:
	@printf "Cleaning utils library\n"
	@rm -rf librh4nutils.a
	@printf "Cleaning utils object\n"
	@rm -rf ./bin/*.o

test:
	xlc -g ./test_src/main.c $(INCLUDE) -o ./test_src/test -L./ -lldaparser -I./src/ $(LIBS)
	./test_src/test ./test_files/TESTLDA.NSL
