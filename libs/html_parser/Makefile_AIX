OBJ = start.o \
	  line_parser.o \
	  command_parsing.o \
	  exec_if.o \
	  exec_macro.o \
	  for.o \
	  for_cmd.o \
	  for_startvalues.o \
	  if.o \
	  json.o \
	  macro.o \
	  token_handling.o \
	  variablen_parsing.o \
	  variablen_handling.o

INCLUDE = -I./src/ \
		  -I../varhandle_lib/src/ \
		  -I../utils/src/

LIBS = -L../varhandle_lib/ -lvars \
	   -L../utils/ -lutils \
	   -L./ -lhtml_parser

lib: $(OBJ)
	ar -vcru libhtml_parser.a ./bin/*.o
	
$(OBJ):
	xlc -g -c ./src/$*.c $(INCLUDE) -o ./bin/$*.o

test: 
	xlc -g -o ./main $(INCLUDE) test_src/main.c $(LIBS)

exec:
	./main
	cat ./test_src/bla

clean:
	rm -rf libvars.a
	rm -rf ./bin/*.o
	rm -rf ./main
