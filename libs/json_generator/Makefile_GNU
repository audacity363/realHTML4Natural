INCLUDE = -I./include/ \
	      -I../varhandle_lib/src/

LIBS = -L../varhandle_lib/ -lvars \
	   -L./ -lgenjson

OBJS = start_json.o print_funcs.o

CARGS = -DDEV_OUTPUT

lib: $(OBJS)
	ar -vcru libgenjson.a ./bin/*.o

$(OBJS):
	gcc -g $(CARGS) -c ./src/$*.c $(INCLUDE) -o ./bin/$*.o

clean:
	rm -rf ./bin/*.o
	rm -rf ./libgenjson.a

test:
	gcc -g ./test_src/main.c $(INCLUDE) -o ./test_src/main $(LIBS)
	./test_src/main
	cat ./test_src/test.out	
