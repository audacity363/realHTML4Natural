OBJ = startv2n.o

INCLUDE = -I./include/ \
		  -I../libs/varhandle_lib/src/ \
		  -I../libs/nat-lda-parser/src/ \
		  -I../natuser_lib/include/ \
		  -I../libs/utils/src/ \
		  -I../include/

LIBS = -L./ -lvar2name \
	   -L../libs/varhandle_lib/ -lldaparser\
	   -L../libs/nat-lda-parser/ -lvars \
	   -L../libs/utils/ -lutils

CC = xlc

lib: clean $(OBJ)
	@printf "Linking libvar2name.a\n"
	@ar -vcru libvar2name.a ./bin/*.o 
	
$(OBJ):
	@printf "CC ./src/$*.c => ./bin/$*.o\n"
	@$(CC) -g -c src/$*.c $(INCLUDE) -o ./bin/$*.o

test:
	xlc -g ./testprogs/main.c $(INCLUDE) $(LIBS) -o ./testprogs/main
	./testprogs/main

clean:
	@printf "Cleaning static lib libvar2name.a\n"
	@rm -rf libvar2name.a
	@printf "Cleaning objects\n"
	@rm -rf ./bin/*.o
	@rm -rf ./test_src/main
